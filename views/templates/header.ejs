<title>Java Tutor</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
<link rel="stylesheet" href="assets/css/main.css" />
<link rel="stylesheet" media = "screen" href="assets/css/editor.css"/>
<script src="http://code.jquery.com/jquery-1.6.2.min.js"></script>
<script src="assets/ace-builds-master/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
<script type ="text/javascript" src="assets/js/getfilecontents.js"></script>
<script type ="text/javascript" src ="assets/js/seteditor.js"></script>
<script type="text/javascript">
  $(function(){
      $('.answer').keypress(function(e){
        if(e.which == 13) {
          e.preventDefault();
          console.log('hit enter in answer field');
					var data = $(this).val();
          var id = this.getAttribute('reference');
          console.log(id);
          var xhr = new XMLHttpRequest();
          xhr.open("POST", "http://javatutor.azurewebsites.net/endpoint", true);
          xhr.setRequestHeader("Content-type", "application/json;charset=UTF-8");
        	xhr.onreadystatechange = function() {
            console.log('onreadystatechange');
        		if (xhr.readyState == 4 && xhr.status == 200) {
        			// Parse the response and build the table
        			//console.log(JSON.parse(xhr.responseText));
              document.getElementById(id).innerHTML = xhr.responseText;
        		}
        	};
          console.log("made it here");
        	xhr.send(JSON.stringify({question:id, user_answer:data}));
        }
      });
    });
  </script>


<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
